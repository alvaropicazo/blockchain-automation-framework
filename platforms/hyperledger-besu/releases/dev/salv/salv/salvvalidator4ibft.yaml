apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: salvvalidator4ibft
  namespace: salv-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: salvvalidator4ibft
  chart:
    git: https://github.com/alvaropicazo/blockchain-automation-framework.git
    ref: testfeat1551check
    path: platforms/hyperledger-besu/charts/node_validator 
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://ea929c26390990caa4693a5e83d88c29d4c514365fa23acfe1501470f33465386c915327314df4b8563d4740b5f612b76d90ddf7f9f1aaf0ae3e1131247e6992@validator1.bes.dev2.aws.blockchaincloudpoc-develop.com:15011"
      
      - "enode://1dbf576d415332e4ba39b06fa765422b59793c2aa86df3d068f1ee5b1fc2aa35b89977d5a56e28144b035a911daad92d2f967e294b90a2fd189e7350dae25c90@validator2.bes.dev2.aws.blockchaincloudpoc-develop.com:15013"
      
      - "enode://479a6f1240cb596cbdc682139484169016249c026d6a0ac76761d714507ce4edca6fb1310e805ea8d3345b7f2fae7ba90945e8492cd1e5e3de686dc2d2c1b1c9@validator3.bes.dev2.aws.blockchaincloudpoc-develop.com:15015"
      
      - "enode://b13ca1ed56ea407496731e9c877935591cf801bcb2e3302788dc5cd338ce209567da4e4fef9e7d3427201c05f7966ceb1c1b5b8b444f6c91e2ceff2e14ed076a@validator4.bes.dev2.aws.blockchaincloudpoc-develop.com:15017"
      
      - "enode://03d55b8fc73dea18e00e0823068969957f0182b68433830f1e236b2ba204e3a3709e479563dbb488df9b8143b39f0b5b859e45eda62bbce09bfc611d0bbc0d86@calv.bes.dev2.aws.blockchaincloudpoc-develop.com:15010"
      
      - "enode://bcca17fae7b6c118c4f49bb5875cfaafe16b99b7d42c2794c7b50d4630bcc1a85dc68222b0d102922188bc6b02029d1657f628db405f905313c8289655d9dcb9@malv.bes.dev2.aws.blockchaincloudpoc-develop.com:15013"
      

    metadata:
      namespace: salv-bes
      labels:

    ambassador:
      external_url_suffix: bes.dev2.aws.blockchaincloudpoc-develop.com

    liveliness_check:
      enabled: false
 
    proxy:
      provider: ambassador
      external_url: salv.bes.dev2.aws.blockchaincloudpoc-develop.com
      p2p: 15017
      rpc: 15018

    images:
      node: hyperledger/besu:1.5.5
      alpineutils: hyperledgerlabs/alpine-utils:1.0

    node:
      name: validator4
      tls: True
      consensus: ibft
      mountPath: /opt/besu/data
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://vault.internal.dev2.aws.blockchaincloudpoc-develop.com:20001
      secretprefix: secretsv2/data/salv-bes/crypto/validator4
      serviceaccountname: vault-auth
      keyname: data
      tlsdir: tls
      role: vault-role
      authpath: besusalv

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMTgsCiAgICAiY29uc3RhbnRpbm9wbGVmaXhibG9jayI6IDAsCiAgICAiY29udHJhY3RTaXplTGltaXQiOiAyMTQ3NDgzNjQ3LAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiAxMAogICAgfQogIH0sCiAgIm5vbmNlIjogIjB4MCIsCiAgInRpbWVzdGFtcCI6ICIweDU4ZWU0MGJhIiwKICAiZ2FzTGltaXQiOiAiMHgxZmZmZmZmZmZmZmZmZiIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAiZXh0cmFEYXRhIjogIjB4Zjg3ZWEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGY4NTQ5NDUyNGMwZGYzZjZkMTRjMDBhYWVkZTNiMjBiM2NhODcxNGMyYTVhZmY5NGVhZTZiMWZlZDIzZDgxMTQwYzUzODBlNDYxMmEwYzY4OWZkZTZkMmQ5NDY1NGY3OGI2MDY5YmJjOTM4NGJkZDJkODcxNWU1ZDM3NTgwYjhhZDk5NDQ4ZDUwNGRhMzM3MDYyMTZhNWQwZTM3YzI2Y2I1YmFlNmQ4ZmNmYjU4MDg0MDAwMDAwMDBjMCIKfQ==
